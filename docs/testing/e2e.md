# E2E テスト運用ガイド

## 概要
- 目的は主要ユーザーフローのスモーク確認です。
- PR ライト CI では Chromium のみを対象に実行します。

## ローカル実行手順
```bash
cd frontend
npm ci
npm run e2e:install   # Chromium のみをインストール
npm run test:e2e
```

## テスト安定化ポリシー
- 過度なアサーションは禁止し、重要なユーザーパスに絞ります。
- 外部ネットワーク依存は極力避け、必要な場合はモックやフィクスチャを使用します。
- 固定待機（`waitForTimeout` など）より、ロールやテキストベースの待機 API を優先します。

## CI 方針
- PR では最小限のスモークテストのみを実行します。
- マルチブラウザ実行、レポート収集、動画・スクリーンショットの取得は `main` / nightly ワークフローに限定します。

## トラブルシュート
- タイムアウト発生時はテストの再試行やリトライメカニズムを検討します。
- ローカルでは `npm run test:e2e -- --headed` などでブラウザ表示しながら確認できます。
- 詳細ログが必要な場合は `DEBUG=pw:* npm run test:e2e` を利用してください。
