# 近隣ジム検索 (MapLibre)

## 目的

ブラウザの現在地または任意で指定した座標を起点に、周辺のジムを地図上のピンと一覧の両方で確認できるようにします。MapLibre GL JS と OpenStreetMap タイルを利用し、追加の API キー不要な構成としています。

## 必要な環境変数

`.env.local` などフロントエンドの環境ファイルに以下を設定してください。

- `NEXT_PUBLIC_API_BASE` (既存の `NEXT_PUBLIC_API_BASE_URL` でも可): API のベース URL。例: `http://127.0.0.1:8000`
- `NEXT_PUBLIC_DEFAULT_CENTER`: 初期センター座標 (`緯度,経度` 形式)。例: `35.681236,139.767125`
- `NEXT_PUBLIC_DEFAULT_RADIUS`: 初期検索半径 (メートル)。例: `3000`

## 起動方法と API 通信

1. 必要に応じて AWS SSM トンネルを開き、API へアクセスできるようにします。
2. `NEXT_PUBLIC_API_BASE` にトンネル経由の URL (例: `http://127.0.0.1:8000`) を設定します。
3. `npm run dev` でフロントエンドを起動し、`/gyms/nearby` にアクセスすると地図と一覧が表示されます。

## 既知の制限・今後の改善候補

- 住所や駅名入力によるジオコーディングは未実装です。現在は緯度・経度の直接入力のみ対応しています。
- ピン数が多い場合のクラスタリングや、設備/料金などの詳細フィルタ連携は今後の拡張余地があります。
- タイルロードはインターネット接続に依存します。社内環境では外部ネットワーク接続の許可状態を確認してください。
